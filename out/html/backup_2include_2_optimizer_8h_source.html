<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ORB_SLAM3: backup/include/Optimizer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ORB_SLAM3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b457ace402ca7986e274a9663e8d868.html">backup</a></li><li class="navelem"><a class="el" href="dir_7036f9eb7203aebcef3f0f010bed5a73.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Optimizer.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="backup_2include_2_optimizer_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef OPTIMIZER_H</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define OPTIMIZER_H</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backup_2include_2_map_8h.html">Map.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backup_2include_2_map_point_8h.html">MapPoint.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backup_2include_2_key_frame_8h.html">KeyFrame.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backup_2include_2_loop_closing_8h.html">LoopClosing.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backup_2include_2_frame_8h.html">Frame.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types__seven__dof__expmap_8h.html">Thirdparty/g2o/g2o/types/types_seven_dof_expmap.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sparse__block__matrix_8h.html">Thirdparty/g2o/g2o/core/sparse_block_matrix.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="block__solver_8h.html">Thirdparty/g2o/g2o/core/block_solver.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimization__algorithm__levenberg_8h.html">Thirdparty/g2o/g2o/core/optimization_algorithm_levenberg.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimization__algorithm__gauss__newton_8h.html">Thirdparty/g2o/g2o/core/optimization_algorithm_gauss_newton.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="linear__solver__eigen_8h.html">Thirdparty/g2o/g2o/solvers/linear_solver_eigen.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types__six__dof__expmap_8h.html">Thirdparty/g2o/g2o/types/types_six_dof_expmap.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="robust__kernel__impl_8h.html">Thirdparty/g2o/g2o/core/robust_kernel_impl.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="linear__solver__dense_8h.html">Thirdparty/g2o/g2o/solvers/linear_solver_dense.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_o_r_b___s_l_a_m3.html">ORB_SLAM3</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">class </span>LoopClosing;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html">   46</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html">Optimizer</a></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#ad51f2da7d383f3244457e8652bd85395">BundleAdjustment</a>(<span class="keyword">const</span> std::vector&lt;KeyFrame*&gt; &amp;vpKF, <span class="keyword">const</span> std::vector&lt;MapPoint*&gt; &amp;vpMP,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                 <span class="keywordtype">int</span> nIterations = 5, <span class="keywordtype">bool</span> *pbStopFlag=NULL, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nLoopKF=0,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> bRobust = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a5628954e54bf2d6980054fc662f61f88">GlobalBundleAdjustemnt</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a>* pMap, <span class="keywordtype">int</span> nIterations=5, <span class="keywordtype">bool</span> *pbStopFlag=NULL,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nLoopKF=0, <span class="keyword">const</span> <span class="keywordtype">bool</span> bRobust = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#af5b3426cabd470b0bdd14a2c02af1072">FullInertialBA</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <span class="keywordtype">int</span> its, <span class="keyword">const</span> <span class="keywordtype">bool</span> bFixLocal=<span class="keyword">false</span>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nLoopKF=0, <span class="keywordtype">bool</span> *pbStopFlag=NULL, <span class="keywordtype">bool</span> bInit=<span class="keyword">false</span>, <span class="keywordtype">float</span> priorG = 1e2, <span class="keywordtype">float</span> priorA=1e6, Eigen::VectorXd *vSingVal = NULL, <span class="keywordtype">bool</span> *bHess=NULL);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a88c002c8c66c6269bd7bce408d2c8ed8">LocalBundleAdjustment</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pKF, <span class="keywordtype">bool</span> *pbStopFlag, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <span class="keywordtype">int</span>&amp; num_fixedKF, <span class="keywordtype">int</span>&amp; num_OptKF, <span class="keywordtype">int</span>&amp; num_MPs, <span class="keywordtype">int</span>&amp; num_edges);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7681acdce001a4498dd1bece61b0d92c">PoseOptimization</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_frame.html">Frame</a>* pFrame);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a618001695bb609c1eafe5fd1669af239">PoseInertialOptimizationLastKeyFrame</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_frame.html">Frame</a>* pFrame, <span class="keywordtype">bool</span> bRecInit = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#ab5aeedc52034f807e277734ce7e318e8">PoseInertialOptimizationLastFrame</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_frame.html">Frame</a> *pFrame, <span class="keywordtype">bool</span> bRecInit = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// if bFixScale is true, 6DoF optimization (stereo,rgbd), 7DoF otherwise (mono)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a20b22de73c9ee96f5e9aeaabe14a2355">OptimizeEssentialGraph</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a>* pMap, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pLoopKF, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pCurKF,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">LoopClosing::KeyFrameAndPose</a> &amp;NonCorrectedSim3,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">LoopClosing::KeyFrameAndPose</a> &amp;CorrectedSim3,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                       <span class="keyword">const</span> map&lt;<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a> *, set&lt;KeyFrame *&gt; &gt; &amp;LoopConnections,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;bFixScale);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a20b22de73c9ee96f5e9aeaabe14a2355">OptimizeEssentialGraph</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pCurKF, vector&lt;KeyFrame*&gt; &amp;vpFixedKFs, vector&lt;KeyFrame*&gt; &amp;vpFixedCorrectedKFs,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                       vector&lt;KeyFrame*&gt; &amp;vpNonFixedKFs, vector&lt;MapPoint*&gt; &amp;vpNonCorrectedMPs);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// For inertial loopclosing</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a169e5c2709edcd10c07c9a15450c8c10">OptimizeEssentialGraph4DoF</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a>* pMap, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pLoopKF, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pCurKF,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">LoopClosing::KeyFrameAndPose</a> &amp;NonCorrectedSim3,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">LoopClosing::KeyFrameAndPose</a> &amp;CorrectedSim3,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                       <span class="keyword">const</span> map&lt;<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a> *, set&lt;KeyFrame *&gt; &gt; &amp;LoopConnections);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// if bFixScale is true, optimize SE3 (stereo,rgbd), Sim3 otherwise (mono) (NEW)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a6599cd62148dd9123e0b6219b86c5f2f">OptimizeSim3</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pKF1, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pKF2, std::vector&lt;MapPoint *&gt; &amp;vpMatches1,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                            <a class="code" href="structg2o_1_1_sim3.html">g2o::Sim3</a> &amp;g2oS12, <span class="keyword">const</span> <span class="keywordtype">float</span> th2, <span class="keyword">const</span> <span class="keywordtype">bool</span> bFixScale,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                            Eigen::Matrix&lt;double,7,7&gt; &amp;mAcumHessian, <span class="keyword">const</span> <span class="keywordtype">bool</span> bAllPoints=<span class="keyword">false</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// For inertial systems</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a93460ac4a7e3256ed599bfa090424187">LocalInertialBA</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pKF, <span class="keywordtype">bool</span> *pbStopFlag, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <span class="keywordtype">int</span>&amp; num_fixedKF, <span class="keywordtype">int</span>&amp; num_OptKF, <span class="keywordtype">int</span>&amp; num_MPs, <span class="keywordtype">int</span>&amp; num_edges, <span class="keywordtype">bool</span> bLarge = <span class="keyword">false</span>, <span class="keywordtype">bool</span> bRecInit = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a777a073ff619aa39e17db653dfbcd98d">MergeInertialBA</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pCurrKF, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pMergeKF, <span class="keywordtype">bool</span> *pbStopFlag, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <a class="code" href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">LoopClosing::KeyFrameAndPose</a> &amp;corrPoses);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// Local BA in welding area when two maps are merged</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a88c002c8c66c6269bd7bce408d2c8ed8">LocalBundleAdjustment</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">KeyFrame</a>* pMainKF,vector&lt;KeyFrame*&gt; vpAdjustKF, vector&lt;KeyFrame*&gt; vpFixedKF, <span class="keywordtype">bool</span> *pbStopFlag);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// Marginalize block element (start:end,start:end). Perform Schur complement.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Marginalized elements are filled with zeros.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">static</span> Eigen::MatrixXd <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a039f7409b97fef9c692bff46355c9900">Marginalize</a>(<span class="keyword">const</span> Eigen::MatrixXd &amp;H, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;start, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;end);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Inertial pose-graph</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7ede71f0250b267adb3e911a1e439fde">InertialOptimization</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <a class="code" href="namespace_sophus.html#a69d0533e78ca2554d52c1e890a0902d1">Eigen::Matrix3d</a> &amp;Rwg, <span class="keywordtype">double</span> &amp;<a class="code" href="namespaceevaluate__ate__scale.html#acffb841d4d292db0c6742e6ebf26c27d">scale</a>, <a class="code" href="namespace_sophus.html#a19a6c529d65dcd5a99bf78e47e606123">Eigen::Vector3d</a> &amp;bg, <a class="code" href="namespace_sophus.html#a19a6c529d65dcd5a99bf78e47e606123">Eigen::Vector3d</a> &amp;ba, <span class="keywordtype">bool</span> bMono, Eigen::MatrixXd  &amp;covInertial, <span class="keywordtype">bool</span> bFixedVel=<span class="keyword">false</span>, <span class="keywordtype">bool</span> bGauss=<span class="keyword">false</span>, <span class="keywordtype">float</span> priorG = 1e2, <span class="keywordtype">float</span> priorA = 1e6);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7ede71f0250b267adb3e911a1e439fde">InertialOptimization</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <a class="code" href="namespace_sophus.html#a19a6c529d65dcd5a99bf78e47e606123">Eigen::Vector3d</a> &amp;bg, <a class="code" href="namespace_sophus.html#a19a6c529d65dcd5a99bf78e47e606123">Eigen::Vector3d</a> &amp;ba, <span class="keywordtype">float</span> priorG = 1e2, <span class="keywordtype">float</span> priorA = 1e6);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">static</span> <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7ede71f0250b267adb3e911a1e439fde">InertialOptimization</a>(<a class="code" href="class_o_r_b___s_l_a_m3_1_1_map.html">Map</a> *pMap, <a class="code" href="namespace_sophus.html#a69d0533e78ca2554d52c1e890a0902d1">Eigen::Matrix3d</a> &amp;Rwg, <span class="keywordtype">double</span> &amp;<a class="code" href="namespaceevaluate__ate__scale.html#acffb841d4d292db0c6742e6ebf26c27d">scale</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#aefacef61d29cfb278f22ff781825a35d">  101</a></span>&#160;    <a class="code" href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#aefacef61d29cfb278f22ff781825a35d">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;};</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;} <span class="comment">//namespace ORB_SLAM3</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#endif // OPTIMIZER_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="abackup_2include_2_frame_8h_html"><div class="ttname"><a href="backup_2include_2_frame_8h.html">Frame.h</a></div></div>
<div class="ttc" id="anamespace_o_r_b___s_l_a_m3_html"><div class="ttname"><a href="namespace_o_r_b___s_l_a_m3.html">ORB_SLAM3</a></div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_atlas_8h_source.html#l00035">Atlas.h:35</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_loop_closing_html_ac962f1d7232c1dde79a34de9701c705d"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_loop_closing.html#ac962f1d7232c1dde79a34de9701c705d">ORB_SLAM3::LoopClosing::KeyFrameAndPose</a></div><div class="ttdeci">map&lt; KeyFrame *, g2o::Sim3, std::less&lt; KeyFrame * &gt;, Eigen::aligned_allocator&lt; std::pair&lt; KeyFrame *const, g2o::Sim3 &gt; &gt; &gt; KeyFrameAndPose</div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_loop_closing_8h_source.html#l00051">LoopClosing.h:51</a></div></div>
<div class="ttc" id="anamespace_sophus_html_a19a6c529d65dcd5a99bf78e47e606123"><div class="ttname"><a href="namespace_sophus.html#a19a6c529d65dcd5a99bf78e47e606123">Sophus::Vector3d</a></div><div class="ttdeci">Vector3&lt; double &gt; Vector3d</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00023">types.hpp:23</a></div></div>
<div class="ttc" id="aoptimization__algorithm__levenberg_8h_html"><div class="ttname"><a href="optimization__algorithm__levenberg_8h.html">optimization_algorithm_levenberg.h</a></div></div>
<div class="ttc" id="abackup_2include_2_map_point_8h_html"><div class="ttname"><a href="backup_2include_2_map_point_8h.html">MapPoint.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html">ORB_SLAM3::Optimizer</a></div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_optimizer_8h_source.html#l00046">Optimizer.h:46</a></div></div>
<div class="ttc" id="atypes__seven__dof__expmap_8h_html"><div class="ttname"><a href="types__seven__dof__expmap_8h.html">types_seven_dof_expmap.h</a></div></div>
<div class="ttc" id="alinear__solver__dense_8h_html"><div class="ttname"><a href="linear__solver__dense_8h.html">linear_solver_dense.h</a></div></div>
<div class="ttc" id="aoptimization__algorithm__gauss__newton_8h_html"><div class="ttname"><a href="optimization__algorithm__gauss__newton_8h.html">optimization_algorithm_gauss_newton.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_frame_html"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_frame.html">ORB_SLAM3::Frame</a></div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_frame_8h_source.html#l00053">Frame.h:53</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_ab5aeedc52034f807e277734ce7e318e8"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#ab5aeedc52034f807e277734ce7e318e8">ORB_SLAM3::Optimizer::PoseInertialOptimizationLastFrame</a></div><div class="ttdeci">static int PoseInertialOptimizationLastFrame(Frame *pFrame, bool bRecInit=false)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l04875">Optimizer.cc:4875</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a6599cd62148dd9123e0b6219b86c5f2f"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a6599cd62148dd9123e0b6219b86c5f2f">ORB_SLAM3::Optimizer::OptimizeSim3</a></div><div class="ttdeci">static int OptimizeSim3(KeyFrame *pKF1, KeyFrame *pKF2, std::vector&lt; MapPoint * &gt; &amp;vpMatches1, g2o::Sim3 &amp;g2oS12, const float th2, const bool bFixScale, Eigen::Matrix&lt; double, 7, 7 &gt; &amp;mAcumHessian, const bool bAllPoints=false)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l02115">Optimizer.cc:2115</a></div></div>
<div class="ttc" id="abackup_2include_2_key_frame_8h_html"><div class="ttname"><a href="backup_2include_2_key_frame_8h.html">KeyFrame.h</a></div></div>
<div class="ttc" id="anamespaceevaluate__ate__scale_html_acffb841d4d292db0c6742e6ebf26c27d"><div class="ttname"><a href="namespaceevaluate__ate__scale.html#acffb841d4d292db0c6742e6ebf26c27d">evaluate_ate_scale.scale</a></div><div class="ttdeci">scale</div><div class="ttdef"><b>Definition:</b> <a href="evaluate__ate__scale_8py_source.html#l00162">evaluate_ate_scale.py:162</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a039f7409b97fef9c692bff46355c9900"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a039f7409b97fef9c692bff46355c9900">ORB_SLAM3::Optimizer::Marginalize</a></div><div class="ttdeci">static Eigen::MatrixXd Marginalize(const Eigen::MatrixXd &amp;H, const int &amp;start, const int &amp;end)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l02960">Optimizer.cc:2960</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a618001695bb609c1eafe5fd1669af239"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a618001695bb609c1eafe5fd1669af239">ORB_SLAM3::Optimizer::PoseInertialOptimizationLastKeyFrame</a></div><div class="ttdeci">static int PoseInertialOptimizationLastKeyFrame(Frame *pFrame, bool bRecInit=false)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l04491">Optimizer.cc:4491</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_key_frame_html"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_key_frame.html">ORB_SLAM3::KeyFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_key_frame_8h_source.html#l00052">KeyFrame.h:52</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a20b22de73c9ee96f5e9aeaabe14a2355"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a20b22de73c9ee96f5e9aeaabe14a2355">ORB_SLAM3::Optimizer::OptimizeEssentialGraph</a></div><div class="ttdeci">static void OptimizeEssentialGraph(Map *pMap, KeyFrame *pLoopKF, KeyFrame *pCurKF, const LoopClosing::KeyFrameAndPose &amp;NonCorrectedSim3, const LoopClosing::KeyFrameAndPose &amp;CorrectedSim3, const map&lt; KeyFrame *, set&lt; KeyFrame * &gt; &gt; &amp;LoopConnections, const bool &amp;bFixScale)</div></div>
<div class="ttc" id="abackup_2include_2_loop_closing_8h_html"><div class="ttname"><a href="backup_2include_2_loop_closing_8h.html">LoopClosing.h</a></div></div>
<div class="ttc" id="arobust__kernel__impl_8h_html"><div class="ttname"><a href="robust__kernel__impl_8h.html">robust_kernel_impl.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a93460ac4a7e3256ed599bfa090424187"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a93460ac4a7e3256ed599bfa090424187">ORB_SLAM3::Optimizer::LocalInertialBA</a></div><div class="ttdeci">static void LocalInertialBA(KeyFrame *pKF, bool *pbStopFlag, Map *pMap, int &amp;num_fixedKF, int &amp;num_OptKF, int &amp;num_MPs, int &amp;num_edges, bool bLarge=false, bool bRecInit=false)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l02383">Optimizer.cc:2383</a></div></div>
<div class="ttc" id="anamespace_sophus_html_a69d0533e78ca2554d52c1e890a0902d1"><div class="ttname"><a href="namespace_sophus.html#a69d0533e78ca2554d52c1e890a0902d1">Sophus::Matrix3d</a></div><div class="ttdeci">Matrix3&lt; double &gt; Matrix3d</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00051">types.hpp:51</a></div></div>
<div class="ttc" id="alinear__solver__eigen_8h_html"><div class="ttname"><a href="linear__solver__eigen_8h.html">linear_solver_eigen.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a7ede71f0250b267adb3e911a1e439fde"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7ede71f0250b267adb3e911a1e439fde">ORB_SLAM3::Optimizer::InertialOptimization</a></div><div class="ttdeci">static void InertialOptimization(Map *pMap, Eigen::Matrix3d &amp;Rwg, double &amp;scale, Eigen::Vector3d &amp;bg, Eigen::Vector3d &amp;ba, bool bMono, Eigen::MatrixXd &amp;covInertial, bool bFixedVel=false, bool bGauss=false, float priorG=1e2, float priorA=1e6)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l03042">Optimizer.cc:3042</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_map_html"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_map.html">ORB_SLAM3::Map</a></div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_map_8h_source.html#l00041">Map.h:41</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_ad51f2da7d383f3244457e8652bd85395"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#ad51f2da7d383f3244457e8652bd85395">ORB_SLAM3::Optimizer::BundleAdjustment</a></div><div class="ttdeci">static void BundleAdjustment(const std::vector&lt; KeyFrame * &gt; &amp;vpKF, const std::vector&lt; MapPoint * &gt; &amp;vpMP, int nIterations=5, bool *pbStopFlag=NULL, const unsigned long nLoopKF=0, const bool bRobust=true)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l00060">Optimizer.cc:60</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a777a073ff619aa39e17db653dfbcd98d"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a777a073ff619aa39e17db653dfbcd98d">ORB_SLAM3::Optimizer::MergeInertialBA</a></div><div class="ttdeci">static void MergeInertialBA(KeyFrame *pCurrKF, KeyFrame *pMergeKF, bool *pbStopFlag, Map *pMap, LoopClosing::KeyFrameAndPose &amp;corrPoses)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l03948">Optimizer.cc:3948</a></div></div>
<div class="ttc" id="abackup_2include_2_map_8h_html"><div class="ttname"><a href="backup_2include_2_map_8h.html">Map.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_af5b3426cabd470b0bdd14a2c02af1072"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#af5b3426cabd470b0bdd14a2c02af1072">ORB_SLAM3::Optimizer::FullInertialBA</a></div><div class="ttdeci">static void FullInertialBA(Map *pMap, int its, const bool bFixLocal=false, const unsigned long nLoopKF=0, bool *pbStopFlag=NULL, bool bInit=false, float priorG=1e2, float priorA=1e6, Eigen::VectorXd *vSingVal=NULL, bool *bHess=NULL)</div></div>
<div class="ttc" id="asparse__block__matrix_8h_html"><div class="ttname"><a href="sparse__block__matrix_8h.html">sparse_block_matrix.h</a></div></div>
<div class="ttc" id="ablock__solver_8h_html"><div class="ttname"><a href="block__solver_8h.html">block_solver.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a169e5c2709edcd10c07c9a15450c8c10"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a169e5c2709edcd10c07c9a15450c8c10">ORB_SLAM3::Optimizer::OptimizeEssentialGraph4DoF</a></div><div class="ttdeci">static void OptimizeEssentialGraph4DoF(Map *pMap, KeyFrame *pLoopKF, KeyFrame *pCurKF, const LoopClosing::KeyFrameAndPose &amp;NonCorrectedSim3, const LoopClosing::KeyFrameAndPose &amp;CorrectedSim3, const map&lt; KeyFrame *, set&lt; KeyFrame * &gt; &gt; &amp;LoopConnections)</div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a5628954e54bf2d6980054fc662f61f88"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a5628954e54bf2d6980054fc662f61f88">ORB_SLAM3::Optimizer::GlobalBundleAdjustemnt</a></div><div class="ttdeci">static void GlobalBundleAdjustemnt(Map *pMap, int nIterations=5, bool *pbStopFlag=NULL, const unsigned long nLoopKF=0, const bool bRobust=true)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l00052">Optimizer.cc:52</a></div></div>
<div class="ttc" id="astructg2o_1_1_sim3_html"><div class="ttname"><a href="structg2o_1_1_sim3.html">g2o::Sim3</a></div><div class="ttdef"><b>Definition:</b> <a href="sim3_8h_source.html#l00041">sim3.h:41</a></div></div>
<div class="ttc" id="atypes__six__dof__expmap_8h_html"><div class="ttname"><a href="types__six__dof__expmap_8h.html">types_six_dof_expmap.h</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a88c002c8c66c6269bd7bce408d2c8ed8"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a88c002c8c66c6269bd7bce408d2c8ed8">ORB_SLAM3::Optimizer::LocalBundleAdjustment</a></div><div class="ttdeci">static void LocalBundleAdjustment(KeyFrame *pKF, bool *pbStopFlag, Map *pMap, int &amp;num_fixedKF, int &amp;num_OptKF, int &amp;num_MPs, int &amp;num_edges)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l01116">Optimizer.cc:1116</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_aefacef61d29cfb278f22ff781825a35d"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#aefacef61d29cfb278f22ff781825a35d">ORB_SLAM3::Optimizer::EIGEN_MAKE_ALIGNED_OPERATOR_NEW</a></div><div class="ttdeci">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="ttdef"><b>Definition:</b> <a href="backup_2include_2_optimizer_8h_source.html#l00101">Optimizer.h:101</a></div></div>
<div class="ttc" id="aclass_o_r_b___s_l_a_m3_1_1_optimizer_html_a7681acdce001a4498dd1bece61b0d92c"><div class="ttname"><a href="class_o_r_b___s_l_a_m3_1_1_optimizer.html#a7681acdce001a4498dd1bece61b0d92c">ORB_SLAM3::Optimizer::PoseOptimization</a></div><div class="ttdeci">static int PoseOptimization(Frame *pFrame)</div><div class="ttdef"><b>Definition:</b> <a href="backup_2src_2_optimizer_8cc_source.html#l00814">Optimizer.cc:814</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 26 2023 09:58:35 for ORB_SLAM3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
